# Legend AI - Environment Variables
# TEMPLATE - Replace with your actual values
# IMPORTANT: Never commit .env to Git - use .gitignore to exclude it

# ===== CORE APPLICATION =====
DEBUG=false
SECRET_KEY=your-secret-key-generate-with-secrets-token_urlsafe
APP_NAME=Legend AI
LOG_LEVEL=INFO

# CORS Origins (comma-separated list)
# Auto-detects Railway domain in production, defaults to "*" in development
# CORS_ORIGINS=https://your-domain.com,https://another-domain.com

# ===== TELEGRAM BOT =====
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-from-botfather
TELEGRAM_CHAT_ID=your-telegram-chat-id
TELEGRAM_WEBHOOK_URL=https://your-railway-domain.railway.app

# ===== MARKET DATA APIs (Multi-source Fallback System) =====
# Primary: TwelveData (500 req/day free - best for historical data)
TWELVEDATA_API_KEY=your-twelvedata-api-key

# Fallback 1: Finnhub (60 req/min free - best for real-time quotes)
FINNHUB_API_KEY=your-finnhub-api-key

# Fallback 2: Alpha Vantage (500 req/day free - backup)
ALPHA_VANTAGE_API_KEY=your-alpha-vantage-api-key

# ===== CHART GENERATION =====
# Chart-img.com PRO (you're paying for this - unlimited charts!)
CHART_IMG_API_KEY=your-chart-img-api-key

# ===== AI SERVICES (OpenRouter - Much Cheaper!) =====
# OpenRouter gives access to GPT-4, Claude, Gemini at LOWER prices than direct
OPENROUTER_API_KEY=your-openrouter-api-key-starts-with-sk-or-v1

# Cost Optimization: Choose your AI model
# - anthropic/claude-3.5-sonnet (~$3/1M tokens) ⭐ BEST VALUE
# - google/gemini-pro-1.5 (~$1.25/1M tokens) ⭐ CHEAPEST
# - openai/gpt-4-turbo (~$10/1M tokens) - Most expensive
# - openai/gpt-3.5-turbo (~$0.50/1M tokens) - Fast & cheap for simple tasks
AI_MODEL=anthropic/claude-3.5-sonnet
AI_TEMPERATURE=0.7

# Alternative: Direct OpenAI (if you want to use your OpenAI subscription)
# OPENAI_API_KEY=your-openai-key-here

# ===== DATABASE =====
# Railway provides this automatically via DATABASE_URL
DATABASE_URL=postgresql://user:password@host:5432/database

# ===== REDIS CACHE =====
# Upstash Redis (free tier - 10k commands/day)
REDIS_URL=redis://default:your-redis-password@your-redis-host.upstash.io:6379

# ===== GOOGLE SHEETS INTEGRATION =====
GOOGLE_SHEETS_ID=your-google-sheet-id

# ===== N8N WORKFLOW INTEGRATION =====
N8N_API_KEY=your-n8n-api-key
N8N_API_URL=https://your-n8n-instance.n8n.cloud
N8N_CHART_WEBHOOK=https://your-n8n-instance.n8n.cloud/webhook/chart-generator-webhook

# ===== BROKER CONNECTIONS (Live Trading) =====
# Default broker for live trading operations
DEFAULT_BROKER=alpaca
BROKER_PAPER_TRADING=true  # Set to false for live trading (USE WITH CAUTION!)

# Alpaca (Commission-free broker - Easiest to set up)
# Get API keys at: https://alpaca.markets/ (Paper trading is free)
ALPACA_API_KEY=your-alpaca-api-key-id
ALPACA_API_SECRET=your-alpaca-api-secret-key

# TD Ameritrade (Requires OAuth setup)
# Get API keys at: https://developer.tdameritrade.com/
TD_AMERITRADE_API_KEY=your-td-consumer-key
TD_AMERITRADE_REFRESH_TOKEN=your-td-refresh-token
TD_AMERITRADE_ACCOUNT_ID=your-td-account-id

# Interactive Brokers (Requires Client Portal Gateway)
# Gateway URL defaults to localhost:5000
IB_GATEWAY_URL=https://localhost:5000/v1/api
IB_ACCOUNT_ID=your-ib-account-id

# TradeStation (Requires OAuth setup)
# Get API keys at: https://www.tradestation.com/
TRADESTATION_API_KEY=your-tradestation-api-key
TRADESTATION_API_SECRET=your-tradestation-api-secret
TRADESTATION_REFRESH_TOKEN=your-tradestation-refresh-token
TRADESTATION_ACCOUNT_ID=your-tradestation-account-id

# ===== FEATURE FLAGS =====
LEGEND_FLAGS_ENABLE_SCANNER=1

# ===== COST OPTIMIZATION SETTINGS =====
# Aggressive caching to reduce API calls
CACHE_TTL_PATTERNS=3600        # 1 hour for pattern detection results
CACHE_TTL_MARKET_DATA=900      # 15 minutes for market data
CACHE_TTL_CHARTS=7200          # 2 hours for generated charts
CACHE_TTL_AI_RESPONSES=1800    # 30 minutes for AI chat responses

# Rate limiting to prevent excessive API usage
RATE_LIMIT_PER_MINUTE=60       # Global API rate limit
AI_RATE_LIMIT_PER_MINUTE=20    # AI-specific rate limit (saves $$)
MARKET_DATA_RATE_LIMIT=30      # Market data API rate limit

# Data source priority (use cheapest/fastest first)
DATA_SOURCE_PRIORITY=twelvedata,finnhub,alphavantage

# ===== RAILWAY DEPLOYMENT =====
# Auto-configured by Railway, but can override
PORT=8000
HOST=0.0.0.0

# ===== GITHUB INTEGRATION (Optional) =====
# GITHUB_TOKEN=your-github-personal-access-token
